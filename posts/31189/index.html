<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Ityoung">





<title>Dockerè¿›é˜¶ç¯‡ | è°¢è°¢ä½ è¿™ä¹ˆå¥½çœ‹è¿˜æ¥è®¿é—®æˆ‘çš„åšå®¢</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="è°¢è°¢ä½ è¿™ä¹ˆå¥½çœ‹è¿˜æ¥è®¿é—®æˆ‘çš„åšå®¢" type="application/atom+xml">
</head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">é¦–é¡µ</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">æ–‡ç« </a>
                
                    <a class="menu-item" href="/category">åˆ†ç±»</a>
                
                    <a class="menu-item" href="/tag">æ ‡ç­¾</a>
                
                    <a class="menu-item" href="/link">å‹é“¾</a>
                
                    <a class="menu-item" href="/about">å…³äº</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">é¦–é¡µ</a><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">æ–‡ç« </a>
                
                    <a class="menu-item" href="/category">åˆ†ç±»</a>
                
                    <a class="menu-item" href="/tag">æ ‡ç­¾</a>
                
                    <a class="menu-item" href="/link">å‹é“¾</a>
                
                    <a class="menu-item" href="/about">å…³äº</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">å±•å¼€ç›®å½•</a>
        <a onclick="go_top()">è¿”å›é¡¶éƒ¨</a>
        <a onclick="go_bottom()">åˆ°è¾¾å°¾éƒ¨</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">Dockerè¿›é˜¶ç¯‡</h1>
            
                <div class="post-meta">
                    
                        ä½œè€…: <a itemprop="author" rel="author" href="/">Ityoung</a>
                    

                    
                        <span class="post-time">
                        å‘å¸ƒæ—¶é—´: <a href="#">2021-09-18&nbsp;&nbsp;10:11:48</a>
                        </span>
                    
                    
                        <span class="post-category">
                    åˆ†ç±»:
                            
                                <a href="/categories/Docker/">Docker</a>
                            
                        </span>
                    
					<br/>
					<!-- å¼€å§‹æ·»åŠ å­—æ•°ç»Ÿè®¡-->
					
						

<span class="post-time">
  <span class="post-meta-item-icon">
	<i class="fa fa-keyboard-o"></i>
	<span class="post-meta-item-text">  å­—æ•°ç»Ÿè®¡: </span>
	<!-- å®‰è£…æ’ä»¶npm install hexo-wordcount --save -->
	<span class="post-count" style="color: #2d96bd">3.1k</span>å­—
  </span>
</span>

<span class="post-time">
  <span class="post-meta-item-icon">
	<i class="fa fa-hourglass-half"></i>
	<span class="post-meta-item-text">  é˜…è¯»æ—¶é•¿: </span>
	<span class="post-count" style="color: #2d96bd">13</span>åˆ†
  </span>
</span>

					
					<!-- æ·»åŠ å®Œæˆ -->
                </div>
            
			<span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span> visits</span>
			
        </header>

        <div class="post-content">
            <blockquote>
<p>è§†é¢‘é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1og4y1q7M4%EF%BC%88%E5%A4%A7%E5%90%8D%E9%BC%8E%E9%BC%8E%E7%9A%84B%E7%AB%99%E7%8B%82%E7%A5%9E%E8%AF%B4%EF%BC%89">https://www.bilibili.com/video/BV1og4y1q7M4ï¼ˆå¤§åé¼é¼çš„Bç«™ç‹‚ç¥è¯´ï¼‰</a></p>
<p>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/Mr_YanMingXin/article/details/119597321">https://blog.csdn.net/Mr_YanMingXin/article/details/119597321</a></p>
</blockquote>
<h3 id="1-Dockeré•œåƒè¯¦è§£"><a href="#1-Dockeré•œåƒè¯¦è§£" class="headerlink" title="1 Dockeré•œåƒè¯¦è§£"></a>1 Dockeré•œåƒè¯¦è§£</h3><p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210923100107326.png" alt="image-20210923100107326"></p>
<p>1.1 UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰</p>
<ul>
<li>è”åˆæ–‡ä»¶ç³»ç»Ÿï¼ˆUnionFSï¼‰æ˜¯ä¸€ç§åˆ†å±‚ã€è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ï¼ŒåŒæ—¶å¯ä»¥å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹ã€‚è”åˆæ–‡ä»¶ç³»ç»Ÿæ˜¯ Docker é•œåƒçš„åŸºç¡€ã€‚é•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿ï¼ŒåŸºäºåŸºç¡€é•œåƒï¼ˆæ²¡æœ‰çˆ¶é•œåƒï¼‰ï¼Œå¯ä»¥åˆ¶ä½œå„ç§å…·ä½“çš„åº”ç”¨é•œåƒã€‚</li>
<li>ç‰¹æ€§ï¼šä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢çœ‹èµ·æ¥åªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚è”åˆåŠ è½½ä¼šæŠŠå„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•ã€‚</li>
</ul>
<h4 id="1-2-é•œåƒåŠ è½½åŸç†"><a href="#1-2-é•œåƒåŠ è½½åŸç†" class="headerlink" title="1.2 é•œåƒåŠ è½½åŸç†"></a>1.2 é•œåƒåŠ è½½åŸç†</h4><p>Dockerçš„é•œåƒå®é™…ç”±ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼š</p>
<ul>
<li>bootfsï¼ˆboot file systemï¼‰ä¸»è¦åŒ…å«bootloaderå’Œkernelã€‚bootloaderä¸»è¦æ˜¯å¼•å¯¼åŠ è½½kernelï¼Œå®Œæˆåæ•´ä¸ªå†…æ ¸å°±éƒ½åœ¨å†…å­˜ä¸­äº†ã€‚æ­¤æ—¶å†…å­˜çš„ä½¿ç”¨æƒå·²ç”±bootfsè½¬äº¤ç»™å†…æ ¸ï¼Œç³»ç»Ÿå¸è½½bootfsã€‚å¯ä»¥è¢«ä¸åŒçš„Linuxå‘è¡Œç‰ˆå…¬ç”¨ã€‚</li>
<li>rootfsï¼ˆroot file systemï¼‰ï¼ŒåŒ…å«å…¸å‹Linuxç³»ç»Ÿä¸­çš„/devï¼Œ/procï¼Œ/binï¼Œ/etcç­‰æ ‡å‡†ç›®å½•å’Œæ–‡ä»¶ã€‚rootfså°±æ˜¯å„ç§ä¸åŒæ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆï¼ˆUbuntuï¼ŒCentosç­‰ï¼‰ã€‚å› ä¸ºåº•å±‚ç›´æ¥ç”¨Hostçš„kernelï¼ŒrootfsåªåŒ…å«æœ€åŸºæœ¬çš„å‘½ä»¤ï¼Œå·¥å…·å’Œç¨‹åºå°±å¯ä»¥äº†ã€‚</li>
<li>åˆ†å±‚ç†è§£<br><code>æ‰€æœ‰çš„Dockeré•œåƒéƒ½èµ·å§‹äºä¸€ä¸ªåŸºç¡€é•œåƒå±‚ï¼Œå½“è¿›è¡Œä¿®æ”¹æˆ–å¢åŠ æ–°çš„å†…å®¹æ—¶ï¼Œå°±ä¼šåœ¨å½“å‰é•œåƒå±‚ä¹‹ä¸Šï¼Œåˆ›å»ºæ–°çš„å®¹å™¨å±‚</code>ã€‚<br>å®¹å™¨åœ¨å¯åŠ¨æ—¶ä¼šåœ¨é•œåƒæœ€å¤–å±‚ä¸Šå»ºç«‹ä¸€å±‚å¯è¯»å†™çš„å®¹å™¨å±‚ï¼ˆR/Wï¼‰ï¼Œè€Œé•œåƒå±‚æ˜¯åªè¯»çš„ï¼ˆR/Oï¼‰ã€‚</li>
</ul>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210918112504261.png" alt="image-20210918112504261"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit -m &quot;æè¿°ä¿¡æ¯&quot; -a &quot;ä½œè€…&quot; å®¹å™¨ID  ç›®æ ‡é•œåƒå:[tag]  # ç¼–è¾‘å®¹å™¨åæäº¤å®¹å™¨æˆä¸ºä¸€ä¸ªæ–°é•œåƒ</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ1608aqb7ntn9Z ~]# docker images</span><br><span class="line">REPOSITORY            TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">tomcat                latest    46cfbf1293b1   13 days ago    668MB</span><br><span class="line">.....</span><br><span class="line">[root@iZ1608aqb7ntn9Z ~]# docker commit --help</span><br><span class="line"></span><br><span class="line">Usage:  docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</span><br><span class="line"></span><br><span class="line">Create a new image from a container&#x27;s changes</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -a, --author string    Author (e.g., &quot;John Hannibal Smith &lt;hannibal@a-team.com&gt;&quot;)</span><br><span class="line">  -c, --change list      Apply Dockerfile instruction to the created image</span><br><span class="line">  -m, --message string   Commit message</span><br><span class="line">  -p, --pause            Pause container during commit (default true)</span><br><span class="line">[root@iZ1608aqb7ntn9Z ~]# docker commit -m &quot;Ymx tomcat&quot; -a &quot;ymx&quot; 46cfbf1293b1 ymxtomcat:1.0</span><br><span class="line">Error response from daemon: No such container: 46cfbf1293b1</span><br><span class="line">[root@iZ1608aqb7ntn9Z ~]# docker commit -m &quot;Ymx tomcat&quot; -a &quot;ymx&quot; tomcat  ymxtomcat:1.0</span><br><span class="line">sha256:ee3100b86b4939d52415da7a62c91d987d91be3ea4776f0ae3d2024b94fed6b4</span><br><span class="line">[root@iZ1608aqb7ntn9Z ~]# docker images</span><br><span class="line">REPOSITORY            TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">ymxtomcat             1.0       ee3100b86b49   5 seconds ago   668MB</span><br><span class="line">tomcat                latest    46cfbf1293b1   13 days ago     668MB</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<h3 id="2-å®¹å™¨æ•°æ®å·"><a href="#2-å®¹å™¨æ•°æ®å·" class="headerlink" title="2 å®¹å™¨æ•°æ®å·"></a>2 å®¹å™¨æ•°æ®å·</h3><p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210918112606471.png" alt="image-20210918112606471"></p>
<h4 id="2-1-ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·ï¼Ÿ"><a href="#2-1-ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·ï¼Ÿ" class="headerlink" title="2.1 ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·ï¼Ÿ"></a>2.1 ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·ï¼Ÿ</h4><p><code>ä¸ºäº†å®ç°æ•°æ®æŒä¹…åŒ–ï¼Œä½¿å®¹å™¨ä¹‹é—´å¯ä»¥å…±äº«æ•°æ®ã€‚å¯ä»¥å°†å®¹å™¨å†…çš„ç›®å½•ï¼ŒæŒ‚è½½åˆ°å®¿ä¸»æœºä¸Šæˆ–å…¶ä»–å®¹å™¨å†…ï¼Œå®ç°åŒæ­¥å’Œå…±äº«çš„æ“ä½œã€‚å³ä½¿å°†å®¹å™¨åˆ é™¤ï¼ŒæŒ‚è½½åˆ°æœ¬åœ°çš„æ•°æ®å·ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</code></p>
<h4 id="2-2-æŒ‡å®šè·¯å¾„æŒ‚è½½"><a href="#2-2-æŒ‡å®šè·¯å¾„æŒ‚è½½" class="headerlink" title="2.2 æŒ‡å®šè·¯å¾„æŒ‚è½½"></a>2.2 æŒ‡å®šè·¯å¾„æŒ‚è½½</h4><h5 id="2-2-1-ç›´æ¥ä½¿ç”¨å‘½ä»¤"><a href="#2-2-1-ç›´æ¥ä½¿ç”¨å‘½ä»¤" class="headerlink" title="2.2.1 ç›´æ¥ä½¿ç”¨å‘½ä»¤"></a>2.2.1 ç›´æ¥ä½¿ç”¨å‘½ä»¤</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -v ä¸»æœºå†…ç›®å½•:å®¹å™¨å†…ç›®å½• é•œåƒå/id</span><br></pre></td></tr></table></figure>
<p>å°†å®¹å™¨å†…ç›®å½•æŒ‚è½½åˆ°ä¸»æœºå†…ç›®å½•ä¸Šï¼Œé€šè¿‡**docker inspect [å®¹å™¨åæˆ–ID]**å‘½ä»¤æŸ¥çœ‹è¯¥å®¹å™¨å³å¯ä»¥çœ‹åˆ°æŒ‚è½½ä¿¡æ¯ï¼š<br><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210917172856343.png" alt="image-20210917172856343"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŒ‚è½½å‘½ä»¤</span></span><br><span class="line">[root@iZ1608aqb7ntn9Z 20210806]# docker run -it -v /opt/Docker/20210806/:/opt centos /bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥åˆ°å®¹å™¨å†…éƒ¨</span></span><br><span class="line">[root@e749444d0ee1 /]# cd opt/</span><br><span class="line">[root@e749444d0ee1 opt]# ls -l </span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 root root 0 Aug  6 03:35 ymx</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æœ¬æœº</span></span><br><span class="line">[root@iZ1608aqb7ntn9Z ~]# cd /opt/Docker/20210806/</span><br><span class="line">[root@iZ1608aqb7ntn9Z 20210806]# ll</span><br><span class="line">æ€»ç”¨é‡ 0</span><br><span class="line">-rw-r--r-- 1 root root 0 8æœˆ   6 11:35 ymx </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker inspect [å®¹å™¨åæˆ–ID] æŸ¥çœ‹æŒ‚è½½</span></span><br><span class="line">[root@iZ1608aqb7ntn9Z 20210806]# docker inspect e749444d0ee1 </span><br><span class="line">......</span><br><span class="line">     &quot;Mounts&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;bind&quot;,</span><br><span class="line">                &quot;Source&quot;: &quot;/opt/Docker/20210806&quot;,  # å¯¹åº”ä¸»æœºçš„æºç›®å½•</span><br><span class="line">                &quot;Destination&quot;: &quot;/opt&quot;,    # å®¹å™¨ä¸­çš„ç›®å½•</span><br><span class="line">                &quot;Mode&quot;: &quot;&quot;,</span><br><span class="line">                &quot;RW&quot;: true,</span><br><span class="line">                &quot;Propagation&quot;: &quot;rprivate&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<p>å»ºç«‹æŒ‚è½½å…³ç³»åï¼Œåªè¦ä½¿ç”¨å‘½ä»¤åœ¨ä¸»æœºå†…æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch /home/mountdir/test.txt</span><br></pre></td></tr></table></figure>
<p>å°±ä¼šåœ¨å®¹å™¨å†…çš„æŒ‚è½½ç›®å½•ä¸‹å‘ç°ç›¸åŒçš„æ–‡ä»¶ï¼ˆtest.txtï¼‰ï¼Œä»è€Œå®ç°äº†å®¹å™¨å’Œä¸»æœºçš„æ–‡ä»¶åŒæ­¥å’Œå…±äº«ã€‚ </p>
<h5 id="2-2-2å®æˆ˜å®‰è£…MySQL"><a href="#2-2-2å®æˆ˜å®‰è£…MySQL" class="headerlink" title="2.2.2å®æˆ˜å®‰è£…MySQL"></a>2.2.2å®æˆ˜å®‰è£…MySQL</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1.æœç´¢MySQLé•œåƒ</span></span><br><span class="line">[root@localhost /]# docekr search mysql</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2.ä¸‹è½½MySQLé•œåƒ</span></span><br><span class="line">[root@localhost /]# docker pull mysql:5.7</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ps:è¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯mysqlæ˜¯éœ€è¦å¯†ç çš„(å»å®˜æ–¹çœ‹çœ‹æµ‹è¯•å®ä¾‹)</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">3.å¯åŠ¨é•œåƒå¹¶ä½¿ç”¨å®¹å™¨æ•°æ®å·</span></span><br><span class="line">[root@localhost /]# docker pull mysql:5.7</span><br></pre></td></tr></table></figure>
<p>æˆåŠŸä¹‹åLinuxæœ¬åœ°ä¸Šå°±ä¼šæœ‰è¿™äº›æ–‡ä»¶,<code>å³ä½¿å½“å®¹å™¨åˆ é™¤äº†,æœ¬åœ°çš„è¿™äº›æ–‡ä»¶å†…å®¹ä¹Ÿä¸ä¼šæ¶ˆå¤±ã€‚å®¹å™¨æ•°æ®æŒä¹…åŒ–</code></p>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210918114737612.png" alt="image-20210918114737612"></p>
<h4 id="2-3-åŒ¿åæŒ‚è½½"><a href="#2-3-åŒ¿åæŒ‚è½½" class="headerlink" title="2.3 åŒ¿åæŒ‚è½½"></a>2.3 åŒ¿åæŒ‚è½½</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d  -v å®¹å™¨å†…ç›®å½•  é•œåƒå/id  # åŒ¿åæŒ‚è½½</span><br></pre></td></tr></table></figure>
<p>åŒ¿åæŒ‚è½½åï¼Œä½¿ç”¨ <strong>docker volume ls</strong>å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰æŒ‚è½½çš„å·ï¼š</p>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210918141219586.png" alt="image-20210918141219586"></p>
<p>æ¯ä¸€ä¸ªVOLUME NAMEå¯¹åº”ä¸€ä¸ªæŒ‚è½½çš„å·ï¼Œç”±äºæŒ‚è½½æ—¶æœªæŒ‡å®šä¸»æœºç›®å½•ï¼Œå› æ­¤æ— æ³•ç›´æ¥æ‰¾åˆ°ç›®å½•ã€‚</p>
<h4 id="2-4-å…·åæŒ‚è½½"><a href="#2-4-å…·åæŒ‚è½½" class="headerlink" title="2.4 å…·åæŒ‚è½½"></a>2.4 å…·åæŒ‚è½½</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run -d  -v å·å:å®¹å™¨å†…ç›®å½•  é•œåƒå/id</span><br><span class="line"><span class="comment">#æµ‹è¯•ç¤ºä¾‹,-Pæ˜¯éšæœºåˆ†é…ä¸€ä¸ªç«¯å£</span></span><br><span class="line">docker run -d -P --name nginx01 -v volume01:/etc/nginx nginx</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210918141657797.png" alt="image-20210918141657797"></p>
<p>å¯ä»¥å‘ç°æŒ‚è½½çš„å·ï¼švolume01ï¼Œå¹¶é€šè¿‡ <strong>docker volume inspect å·å</strong> å‘½ä»¤æ‰¾åˆ°ä¸»æœºå†…ç›®å½•ï¼š</p>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210918141747138.png" alt="image-20210918141747138"></p>
<p>æ‰€æœ‰dockerå®¹å™¨å†…çš„å·ï¼Œåœ¨æœªæŒ‡å®šä¸»æœºå†…ç›®å½•æ—¶ï¼Œéƒ½åœ¨ï¼š<code> _/var/lib/docker/volumes/å·å/_data_ ä¸‹</code>ï¼Œå¯é€šè¿‡å…·åæŒ‚è½½å¯ä»¥æ–¹ä¾¿çš„æ‰¾åˆ°å·ï¼Œå› æ­¤å¹¿æ³›ä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡ŒæŒ‚è½½ã€‚</p>
<p><strong>æ‹“å±•</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">é€šè¿‡ -v å®¹å™¨å†…è·¯å¾„:ro rw æ”¹å˜è¯»å†™æƒé™</span></span><br><span class="line">ro readonly #åªè¯»</span><br><span class="line">rw readwrite #è¯»å†™</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ä¸€æ—¦è¿™ä¸ªè®¾ç½®äº†å®¹å™¨æƒé™,å®¹å™¨å¯¹æˆ‘ä»¬æŒ‚è½½å‡ºæ¥çš„å†…å®¹å°±æœ‰äº†é™å®šäº†!</span></span><br><span class="line">docker run -d -P --name nginx01 -v volume01:/etc/nginx:ro nginx</span><br><span class="line">docker run -d -P --name nginx01 -v volume01:/etc/nginx:rw nginx</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ro åªè¦çœ‹åˆ°è¿™ä¸ªroè¯´æ˜è¿™ä¸ªè·¯å¾„åªèƒ½é€šè¿‡å®¿ä¸»æœºæ¥è¿›è¡Œæ“ä½œ, å®¹å™¨å†…éƒ¨å¯ä»¥æ”¹å˜!</span></span><br></pre></td></tr></table></figure>


<h4 id="2-5-æ•°æ®å·å®¹å™¨"><a href="#2-5-æ•°æ®å·å®¹å™¨" class="headerlink" title="2.5 æ•°æ®å·å®¹å™¨"></a>2.5 æ•°æ®å·å®¹å™¨</h4><p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210918145033256.png" alt="image-20210918145033256"></p>
<p>ğŸ˜Šç¤ºä¾‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name container02 --volumes from container01 é•œåƒå/id  <span class="comment"># å°†ä¸¤ä¸ªå®¹å™¨è¿›è¡ŒæŒ‚è½½</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#docker run -d -p 3310:3306 -v /etc/mysql/conf.d -v /var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name mysql01 mysql:5.7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#docker run -d -p 3310:3306 -v /etc/mysql/conf.d -v /var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name mysql02   --volumes-from mysql01 mysql:5.7</span></span><br></pre></td></tr></table></figure>
<h3 id="3-DockerFile"><a href="#3-DockerFile" class="headerlink" title="3 DockerFile"></a>3 DockerFile</h3><p>Dockerfileæ˜¯ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ–‡ä»¶</p>
<h4 id="3-1-æ„å»ºæ­¥éª¤ï¼š"><a href="#3-1-æ„å»ºæ­¥éª¤ï¼š" class="headerlink" title="3.1 æ„å»ºæ­¥éª¤ï¼š"></a>3.1 æ„å»ºæ­¥éª¤ï¼š</h4><p>ç¼–å†™ä¸€ä¸ªdockerfileæ–‡ä»¶,éšåè¿è¡Œå‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–‡ä»¶åä¸ºDockerfileæ—¶å¯çœç•¥ä¸”æœ€åçš„.ä¸è¦å¿½ç•¥</span></span><br><span class="line">docker build -f æ–‡ä»¶è·¯å¾„ -t é•œåƒå .  </span><br><span class="line">docker run     <span class="comment"># è¿è¡Œé•œåƒ</span></span><br><span class="line">docker push    <span class="comment"># å‘å¸ƒé•œåƒ</span></span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ1608aqb7ntn9Z 20210806]# vim Dockerfile </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">----------å†™å…¥å†…å®¹-----------------</span></span><br><span class="line">FROM centos      # æ¥è‡ªcentos</span><br><span class="line">CMD /bin/bash    # è¿›å…¥åˆ°/bin/bash</span><br><span class="line">CMD echo Hello Dockerfile   # è¾“å‡ºHello Dockerfile</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">----------å†™å…¥ç»“æŸ-----------------</span></span><br><span class="line">[root@iZ1608aqb7ntn9Z 20210806]# docker build -f ./Dockerfile -t mydocker .</span><br><span class="line">Sending build context to Docker daemon   2.56kB</span><br><span class="line">Step 1/3 : FROM centos</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">300e315adb2f</span></span><br><span class="line">Step 2/3 : CMD /bin/bash</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> 526f489adf0b</span></span><br><span class="line">Removing intermediate container 526f489adf0b</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">3c2af9c73098</span></span><br><span class="line">Step 3/3 : CMD echo Hello Dockerfile</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> 023af54a93e2</span></span><br><span class="line">Removing intermediate container 023af54a93e2</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">7753b44c9137</span></span><br><span class="line">Successfully built 7753b44c9137</span><br><span class="line">Successfully tagged mydocker:latest</span><br><span class="line">[root@iZ1608aqb7ntn9Z 20210806]# docker images</span><br><span class="line">REPOSITORY            TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">mydocker              latest    7753b44c9137   6 seconds ago    209MB</span><br><span class="line">......</span><br><span class="line">[root@iZ1608aqb7ntn9Z 20210806]# docker run -it mydocker</span><br><span class="line">Hello Dockerfile</span><br></pre></td></tr></table></figure>
<h4 id="3-2-Dockerfileå‘½ä»¤"><a href="#3-2-Dockerfileå‘½ä»¤" class="headerlink" title="3.2 Dockerfileå‘½ä»¤"></a>3.2 Dockerfileå‘½ä»¤</h4><table>
<thead>
<tr>
<th align="center">å‘½ä»¤</th>
<th align="center">æ•ˆæœ</th>
</tr>
</thead>
<tbody><tr>
<td align="center">FROM</td>
<td align="center">åŸºç¡€é•œåƒï¼šCentos/Ubuntu</td>
</tr>
<tr>
<td align="center">MAINTAINER</td>
<td align="center">é•œåƒä½œè€…+é‚®ç®±</td>
</tr>
<tr>
<td align="center">RUN</td>
<td align="center">é•œåƒæ„å»ºçš„æ—¶å€™éœ€è¦è¿è¡Œçš„å‘½ä»¤</td>
</tr>
<tr>
<td align="center">ADD</td>
<td align="center">ä¸ºé•œåƒæ·»åŠ å†…å®¹ï¼ˆå‹ç¼©åŒ…ï¼‰</td>
</tr>
<tr>
<td align="center">WORKDIR</td>
<td align="center">é•œåƒå·¥ä½œç›®å½•ï¼ˆè¿›å…¥å®¹å™¨æ—¶çš„ç›®å½•ï¼‰</td>
</tr>
<tr>
<td align="center">VOLUME</td>
<td align="center">æŒ‚è½½çš„ç›®å½•</td>
</tr>
<tr>
<td align="center">EXPOSE</td>
<td align="center">æš´éœ²ç«¯å£é…ç½®</td>
</tr>
<tr>
<td align="center">CMD/ENTRYPOINT</td>
<td align="center">æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤ï¼ˆCMDæ›¿ä»£å…ˆå‰å‘½ä»¤ï¼ŒENTRYPOINTåœ¨å…ˆå‰å‘½ä»¤åè¿½åŠ ï¼‰</td>
</tr>
<tr>
<td align="center">COPY</td>
<td align="center">ç±»ä¼¼äºADDï¼Œå°†æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­</td>
</tr>
<tr>
<td align="center">ENV</td>
<td align="center">æ„å»ºæ—¶è®¾ç½®ç¯å¢ƒå˜é‡</td>
</tr>
</tbody></table>
<h4 id="3-3-æ„å»ºè¿‡ç¨‹"><a href="#3-3-æ„å»ºè¿‡ç¨‹" class="headerlink" title="3.3 æ„å»ºè¿‡ç¨‹"></a>3.3 æ„å»ºè¿‡ç¨‹</h4><ol>
<li>æ¯ä¸ªä¿ç•™å…³é”®å­—ï¼ˆæŒ‡ä»¤ï¼‰éƒ½å¿…é¡»æ˜¯å¤§å†™å­—æ¯</li>
<li>ä»ä¸Šåˆ°ä¸‹é¡ºåºæ‰§è¡Œ</li>
<li>â€œ#â€ è¡¨ç¤ºæ³¨é‡Š</li>
<li>æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šåˆ›å»ºæäº¤ä¸€ä¸ªæ–°çš„é•œåƒå±‚å¹¶æäº¤</li>
</ol>
<h4 id="3-4-æ„å»ºå®ä¾‹-jdk-tomcat"><a href="#3-4-æ„å»ºå®ä¾‹-jdk-tomcat" class="headerlink" title="3.4 æ„å»ºå®ä¾‹(jdk+tomcat)"></a>3.4 æ„å»ºå®ä¾‹(jdk+tomcat)</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ1608aqb7ntn9Z 20210806]# vim DockerFile2</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-----------å†™å…¥æ–‡ä»¶--------------</span></span><br><span class="line"></span><br><span class="line">FROM centos</span><br><span class="line">  </span><br><span class="line">COPY ymx /opt/Docker/20210806/ymx</span><br><span class="line"></span><br><span class="line">ADD jdk8.tar.gz /usr/local</span><br><span class="line">ADD tomcat.tar.gz /usr/local</span><br><span class="line"></span><br><span class="line">RUN yum -y install vim</span><br><span class="line"></span><br><span class="line">ENV MYPATH /usr/local</span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line"></span><br><span class="line">ENV JAVA_HOME /usr/local/jdk1.8.0_141</span><br><span class="line">ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class="line">ENV PATH $PATH:$JAVA_HOME/bin</span><br><span class="line"></span><br><span class="line">EXPOSE 8080</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-----------å†™å…¥æ–‡ä»¶å®Œæˆ--------------</span></span><br><span class="line">[root@iZ1608aqb7ntn9Z 20210806]# ls</span><br><span class="line">Dockerfile  DockerFile2  ymx</span><br><span class="line">[root@iZ1608aqb7ntn9Z 20210806]# cp /tmp/jdk8.tar.gz jdk8.tar.gz</span><br><span class="line">[root@iZ1608aqb7ntn9Z 20210806]# cp /tmp/tomcat.tar.gz tomcat.tar.gz</span><br><span class="line">[root@iZ1608aqb7ntn9Z 20210806]# ls</span><br><span class="line">Dockerfile  DockerFile2  jdk8.tar.gz  tomcat.tar.gz  ymx</span><br><span class="line">[root@iZ1608aqb7ntn9Z 20210806]# docker build -f ./DockerFile2 -t mytomcat9 . </span><br><span class="line">Sending build context to Docker daemon    197MB</span><br><span class="line">Step 1/11 : FROM centos</span><br><span class="line">......</span><br><span class="line">Successfully built 86a9a8dd939a</span><br><span class="line">Successfully tagged mytomcat9:latest</span><br><span class="line">[root@iZ1608aqb7ntn9Z 20210806]# docker images</span><br><span class="line">REPOSITORY            TAG       IMAGE ID       CREATED             SIZE</span><br><span class="line">mytomcat9             latest    86a9a8dd939a   26 seconds ago      667MB</span><br><span class="line">......</span><br><span class="line">[root@iZ1608aqb7ntn9Z 20210806]# docker run -it mytomcat9 /bin/bash</span><br><span class="line">[root@ed5fd71834e2 local]# ls</span><br><span class="line">apache-tomcat-9.0.44  bin  etc  games  include  jdk1.8.0_141  lib  lib64  libexec  sbin  share  src</span><br><span class="line">[root@ed5fd71834e2 local]# java -version</span><br><span class="line">java version &quot;1.8.0_141&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_141-b15)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.141-b15, mixed mode)</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210918171625075.png" alt="image-20210918171625075"></p>
<h3 id="4-Dockerç½‘ç»œ"><a href="#4-Dockerç½‘ç»œ" class="headerlink" title="4 Dockerç½‘ç»œ"></a>4 Dockerç½‘ç»œ</h3><h4 id="4-1-ç†è§£Docker"><a href="#4-1-ç†è§£Docker" class="headerlink" title="4.1 ç†è§£Docker"></a>4.1 ç†è§£Docker</h4><p>é€šè¿‡å‘½ä»¤ <strong>ip addr</strong>æŸ¥çœ‹æœ¬åœ°ipåœ°å€ï¼Œæˆ‘ä»¬å‘ç°é™¤äº†æœ¬æœºå›ç¯åœ°å€å’ŒåŸƒé‡Œè¿œçš„å†…ç½‘åœ°å€å¤–ï¼Œè¿˜å¤šäº†ä¸€ä¸ªç½‘å¡ï¼šDocker0ï¼Œè¿™æ˜¯DockeræœåŠ¡å¯åŠ¨åè‡ªåŠ¨ç”Ÿæˆçš„ã€‚</p>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210923095031300.png" alt="image-20210923095031300"></p>
<p>è€Œå¦‚æœè¿›å…¥ä¸€ä¸ªæ­£åœ¨åå°è¿è¡Œçš„tomcatå®¹å™¨ï¼ŒåŒæ ·ä½¿ç”¨ <strong>ip addr</strong>å‘½ä»¤ï¼Œå‘ç°å®¹å™¨å¾—åˆ°äº†ä¸€ä¸ªæ–°çš„ç½‘ç»œï¼š <strong>12: eth@if13</strong>ï¼Œipåœ°å€ï¼š <strong>172.17.0.2</strong>ã€‚è¿™æ˜¯Dockeråœ¨å®¹å™¨å¯åŠ¨æ—¶ä¸ºå…¶åˆ†é…çš„ã€‚</p>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210923094909167.png" alt="image-20210923094909167"></p>
<p>æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šæ­¤æ—¶æˆ‘ä»¬çš„linuxä¸»æœºå¯ä»¥pingé€šå®¹å™¨å†…éƒ¨ï¼ˆ <strong>172.17.0.2</strong>ï¼‰å—ï¼Ÿï¼ˆ <strong>æ³¨æ„ä¸å®¹å™¨æš´éœ²ç«¯å£ç›¸åŒºåˆ†</strong>ï¼‰</p>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210923094958986.png" alt="image-20210923094958986"></p>
<ul>
<li>linuxå¯ä»¥pingé€šdockerå®¹å™¨å†…éƒ¨ï¼Œå› ä¸ºdocker0çš„ipåœ°å€ä¸º <strong>172.17.0.1</strong>ï¼Œå®¹å™¨ä¸º <strong>172.17.0.2</strong>ã€‚</li>
<li>åŸç†ï¼šæˆ‘ä»¬æ¯å¯åŠ¨ä¸€ä¸ªdockerå®¹å™¨ï¼Œdockerå°±ä¼šç»™å®¹å™¨åˆ†é…ä¸€ä¸ªé»˜è®¤çš„å¯ç”¨ipï¼Œæˆ‘ä»¬åªè¦å®‰è£…äº†dockerï¼Œå°±ä¼šæœ‰ä¸€ä¸ªç½‘å¡docker0(bridge)ã€‚ç½‘å¡é‡‡ç”¨æ¡¥æ¥æ¨¡å¼ï¼Œå¹¶ä½¿ç”¨veth-pairæŠ€æœ¯ï¼ˆveth-pairå°±æ˜¯ä¸€å †è™šæ‹Ÿè®¾å¤‡æ¥å£ï¼Œæˆå¯¹å‡ºç°ï¼Œä¸€æ®µè¿ç€åè®®ï¼Œä¸€æ®µå½¼æ­¤ç›¸è¿ï¼Œå……å½“ä¸€ä¸ªæ¡¥æ¢ã€‚ï¼‰ã€‚</li>
<li>è¿™æ—¶æˆ‘ä»¬é€€å‡ºå®¹å™¨ï¼Œå›åˆ°ä¸»æœºå†æ¬¡è§‚å¯Ÿä¸»æœºçš„ipåœ°å€ï¼š</li>
</ul>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210923095049288.png" alt="image-20210923095049288"></p>
<ul>
<li>æˆ‘ä»¬æƒŠå¥‡åœ°å‘ç°äº†ä¸€ä¸ªæ–°ç½‘ç»œ <strong>13: vethda1df4b@if12</strong>ï¼Œå¯¹åº”å®¹å™¨å†…ç½‘ç»œåœ°å€çš„ <strong>12: eth@if13</strong>ã€‚</li>
<li>å®¹å™¨å’Œå®¹å™¨ä¹‹é—´æ˜¯å¯ä»¥äº’ç›¸pingé€šçš„ï¼šå®¹å™¨1â†’Docker0â†’å®¹å™¨2</li>
</ul>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210923095106624.png" alt="image-20210923095106624"></p>
<ul>
<li>dockerä¸­çš„æ‰€æœ‰ç½‘ç»œæ¥å£éƒ½æ˜¯è™šæ‹Ÿçš„ ï¼Œè½¬å‘æ•ˆç‡é«˜ã€‚åˆ é™¤å®¹å™¨åï¼Œå¯¹åº”çš„ç½‘æ¡¥ä¹Ÿéšä¹‹åˆ é™¤ã€‚</li>
</ul>
<h4 id="4-2-â€“link"><a href="#4-2-â€“link" class="headerlink" title="4.2 â€“link"></a>4.2 â€“link</h4><p>è‹¥ç¼–å†™ä¸€ä¸ªå¾®æœåŠ¡å¹¶è¿æ¥æ•°æ®åº“ï¼Œå¦‚æœæ•°æ®åº“ipæ”¹å˜ï¼Œå¦‚ä½•æ ¹æ®å®¹å™¨åè€Œä¸æ˜¯ipè®¿é—®å®¹å™¨ï¼Ÿæ˜¾ç„¶ï¼Œç›´æ¥ä½¿ç”¨å®¹å™¨åæ˜¯æ— æ³•pingé€šå®¹å™¨å†…éƒ¨çš„ï¼š<img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210923095127786.png" alt="image-20210923095127786"></p>
<p>è¿™æ—¶æˆ‘ä»¬å¯ä»¥åœ¨å®¹å™¨å¯åŠ¨å‘½ä»¤ä¸­åŠ å…¥ä¸€ä¸ªé€‰é¡¹ï¼š <strong>â€“link</strong>ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥æ ¹æ®å®¹å™¨åæ¥è®¿é—®å®¹å™¨ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -P --link å®¹å™¨å/id é•œåƒå/id</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210923095147336.png" alt="image-20210923095147336"></p>
<p>ç„¶è€Œåå‘å°±ä¸å¯ä»¥pingé€šï¼Œè¿™æ˜¯å› ä¸ºâ€“linkçš„æœ¬è´¨æ˜¯æŠŠéœ€è¦è¿æ¥çš„å®¹å™¨å/idå†™å…¥å¯åŠ¨å®¹å™¨çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå³å¢åŠ äº†ä¸€ä¸ªipå’Œå®¹å™¨å/idçš„æ˜ å°„ï¼š</p>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210923095156628.png" alt="image-20210923095156628"></p>
<p>ç›®å‰å·²ç»ä¸å»ºè®®ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p>
<h4 id="4-3-è‡ªå®šä¹‰ç½‘ç»œ"><a href="#4-3-è‡ªå®šä¹‰ç½‘ç»œ" class="headerlink" title="4.3 è‡ªå®šä¹‰ç½‘ç»œ"></a>4.3 è‡ªå®šä¹‰ç½‘ç»œ</h4><p>æˆ‘ä»¬ä½¿ç”¨å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210923095230483.png" alt="image-20210923095230483"></p>
<p>dockerä¸­çš„ç½‘ç»œæ¨¡å¼æœ‰ï¼š</p>
<ul>
<li>bridgeï¼šæ¡¥æ¥ï¼ˆdockeré»˜è®¤ï¼‰/</li>
<li>noneï¼šä¸é…ç½®ç½‘ç»œ /</li>
<li>hostï¼šå’Œå®¿ä¸»æœºå…±äº«ç½‘ç»œ</li>
</ul>
<p><strong>docker run</strong> å‘½ä»¤é»˜è®¤å¸¦æœ‰ä¸€ä¸ªå‚æ•°â€“net bridgeï¼Œæ­¤å¤„çš„bridgeæŒ‡çš„å°±æ˜¯docker0ã€‚å¦‚æœæˆ‘ä»¬ä¸æƒ³ä½¿ç”¨docker0ï¼Œé‚£å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ–°çš„ç½‘ç»œå‘¢ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker  network create --driver ç½‘ç»œæ¨¡å¼ --subnet å­ç½‘ip --gateway ç½‘å…³ ç½‘ç»œå</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210923095359909.png" alt="image-20210923095359909"></p>
<p>æˆ‘ä»¬ä¸ä»…åœ¨ <strong>docker network ls</strong>å‘½ä»¤ä¸‹å‘ç°äº†è¿™ä¸ªæ–°åˆ›å»ºçš„ç½‘ç»œnewnetï¼Œè¿˜å¯ä»¥ä½¿ç”¨ <strong>docker network inspect</strong>å‘½ä»¤æŸ¥çœ‹å…¶è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬äº†æˆ‘ä»¬åˆ›å»ºæ—¶å®šä¹‰çš„å­ç½‘ipå’Œç½‘å…³ï¼š</p>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210923095423054.png" alt="image-20210923095423054"></p>
<p>åªè¦ä¸¤ä¸ªå®¹å™¨å¯åŠ¨æ—¶éƒ½é€šè¿‡ <strong>â€“net</strong>ï¼Œé€‰ç”¨äº†åŒä¸€ä¸ªå·²åˆ›å»ºçš„ç½‘ç»œï¼Œä¸åŒå®¹å™¨é—´å³å¯é€šè¿‡ipåœ°å€æˆ–å®¹å™¨å/idè¿é€š:<br><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210923095345780.png" alt="image-20210923095345780"></p>
<h4 id="4-4-ç½‘ç»œè¿é€š"><a href="#4-4-ç½‘ç»œè¿é€š" class="headerlink" title="4.4 ç½‘ç»œè¿é€š"></a>4.4 ç½‘ç»œè¿é€š</h4><p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210923095335931.png" alt="image-20210923095335931"></p>
<p>å¯¹äºå»ºç«‹åœ¨ä¸åŒç½‘ç»œä¸‹(docker0, newnet)çš„ä¸¤ä¸ªå®¹å™¨tomcat01å’Œtomcat02ï¼Œä»–ä»¬çš„ç½‘æ®µä¸åŒï¼Œå› æ­¤æ˜¯æ— æ³•å½¼æ­¤pingé€šå®¹å™¨å†…éƒ¨çš„ï¼š</p>
<p>è¿™æ—¶æˆ‘ä»¬éœ€è¦é€šè¿‡ <strong>docker network connect</strong>å‘½ä»¤æ‰“é€šå®¹å™¨ä¸ç½‘ç»œä¹‹é—´çš„è¿æ¥ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network connect ç½‘ç»œå å®¹å™¨å/id</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/ityoung09/images/raw/master/images/image-20210923095307924.png" alt="image-20210923095307924"></p>
<h3 id="5-SpringBooté¡¹ç›®æ‰“åŒ…Dockeré•œåƒ"><a href="#5-SpringBooté¡¹ç›®æ‰“åŒ…Dockeré•œåƒ" class="headerlink" title="5 SpringBooté¡¹ç›®æ‰“åŒ…Dockeré•œåƒ"></a>5 SpringBooté¡¹ç›®æ‰“åŒ…Dockeré•œåƒ</h3><p>1ã€æ„å»ºSpringBooté¡¹ç›®</p>
<p>2ã€æ‰“åŒ…è¿è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn package</span><br></pre></td></tr></table></figure>
<p>3ã€ç¼–å†™Dockerfile</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM java:8</span><br><span class="line">COPY *.jar /app.jar</span><br><span class="line">CMD [&quot;--server.port=8080&quot;]</span><br><span class="line">EXPOSE 8080</span><br><span class="line">ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]</span><br></pre></td></tr></table></figure>
<p>4ã€æ„å»ºé•œåƒ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker build -t xxxxx:xx  .</span></span><br></pre></td></tr></table></figure>
<p>5ã€å‘å¸ƒè¿è¡Œ</p>
<p>ä»¥åæˆ‘ä»¬ä½¿ç”¨äº†Dockerä¹‹åï¼Œç»™åˆ«äººäº¤ä»˜å°±æ˜¯ä¸€ä¸ªé•œåƒå³å¯ï¼</p>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>ä½œè€…:</span>
                        <span>Ityoung</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>æœ¬ç«™é“¾æ¥:</span>
                        <span><a href="http://www.ityoung.xyz/posts/31189/">http://www.ityoung.xyz/posts/31189/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>æ‰§ç…§:</span>
                        <span>Copyright (c) 2019 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
				<!--
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Do you believe in <strong>DESTINY</strong>?</span>
                     </p>
                
				-->
            </section>
        
        <section class="post-tags">
            <div>
                <span>æ ‡ç­¾:</span>
                <span class="tag">
                    
                    
                        <a href="/tags/Linux/"><i class="iconfont icon-githubiconfont icon-tags"></i>Linux</a>
                    
                        <a href="/tags/%E5%AE%B9%E5%99%A8/"><i class="iconfont icon-githubiconfont icon-tags"></i>å®¹å™¨</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">è¿”å›</a>
                <span>Â· </span>
                <a href="/">é¦–é¡µ</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/posts/58844/">ä½¿ç”¨ Stream API æµçš„æ–¹å¼ä¼˜åŒ– Java ä»£ç ï¼</a>
            
            
            <a class="next" rel="next" href="/posts/25375/">DockeråŸºç¡€ç¯‡</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>Â© Powered by Ityoung</span>
		
			<br/>
			

	<span id="busuanzi_container_site_pv">
		æ€»è®¿é—®é‡:
		<span id="busuanzi_value_site_pv"></span>
	</span>


	<span id="busuanzi_container_site_uv">
		æ€»è®¿å®¢é‡:
		<span  id="busuanzi_value_site_uv"></span>
	</span>&nbsp;

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
		
	</div>
	
</footer>

    </div>
</body>
</html>
